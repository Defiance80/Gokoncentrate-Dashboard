{"version":3,"file":"/js/media/media.min.js","mappings":"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","sources":["webpack:///./resources/js/media/media.js"],"sourcesContent":["let baseUrl = '';\nconst baseUrlMeta = document.querySelector('meta[name=\"base-url\"]');\nif (baseUrlMeta) {\n  baseUrl = baseUrlMeta.getAttribute('content');\n}\n\nconst exampleModal = document.getElementById('exampleModal');\nconst mediaContainer = document.getElementById('media-container');\nconst mediaLibraryContent = document.getElementById('mediaLibraryContent');\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  let selectedMediaUrl = '';\n  let currentImageContainer = '';\n  let currentHiddenInput = '';\n  let videoInputCounter = 0; // Initialize a counter for dynamic IDs\n\n  // Expose variables globally for external access\n  window.mediaSelection = {\n    setCurrentImageContainer: function(container) {\n      currentImageContainer = container;\n    },\n    setCurrentHiddenInput: function(input) {\n      currentHiddenInput = input;\n    },\n    getCurrentImageContainer: function() {\n      return currentImageContainer;\n    },\n    getCurrentHiddenInput: function() {\n      return currentHiddenInput;\n    }\n  };\n  // Helper to enable/disable the Upload tab Save button based on upload status\n  function updateUploadSubmitState() {\n    const submitBtn = document.getElementById('submitButton');\n    if (!submitBtn) return;\n    const list = window.uploadedFiles || [];\n    const active = list.filter(function (f) { return !f.removed; });\n    const allDone = active.length > 0 && active.every(function (f) { return f.done === true; });\n    submitBtn.disabled = !allDone;\n  }\n  // Expose globally for handlers defined outside this scope\n  window.updateUploadSubmitState = updateUploadSubmitState;\n\n  function initializeImageSelection(button) {\n    button.addEventListener('click', function () {\n      currentImageContainer = this.getAttribute('data-image-container');\n      currentHiddenInput = this.getAttribute('data-hidden-input');\n    });\n  }\n\n  // Expose globally for external use\n  window.initializeImageSelection = initializeImageSelection;\n\n  function initializeModal() {\n    document.querySelectorAll('button[data-bs-target=\"#exampleModal\"]').forEach(function (button) {\n      initializeImageSelection(button);\n    });\n  }\n\n  // Expose globally for external use\n  window.initializeModal = initializeModal;\n\n  function selectMedia(mediaUrl, mediaElement) {\n    selectedMediaUrl = mediaUrl;\n\n    // Remove active class from all media elements\n    document.querySelectorAll('#mediaLibraryContent img, #mediaLibraryContent video').forEach(function (media) {\n      media.classList.remove('iq-image');\n    });\n\n    // Add active class to the selected media element\n    mediaElement.classList.add('iq-image');\n  }\n\n  const mediaLibraryContentElement = document.getElementById('mediaLibraryContent');\n  if (mediaLibraryContentElement) {\n    mediaLibraryContentElement.addEventListener('click', function (event) {\n\n      if (event.target.tagName === 'IMG') {\n        var mediaUrl = event.target.src;\n        selectMedia(mediaUrl, event.target);\n      } else if (event.target.tagName === 'VIDEO') {\n\n        var mediaUrl = event.target.querySelector('source').src;\n        //   var mediaUrl = event.target.src;\n        if (mediaUrl) {\n\n          selectMedia(mediaUrl, event.target);\n        }\n        event.preventDefault();\n      }\n    });\n  }\n\n  const mediaSubmitButton = document.getElementById('mediaSubmitButton');\n  if (mediaSubmitButton) {\n    mediaSubmitButton.addEventListener('click', function () {\n      if (selectedMediaUrl && currentImageContainer && currentHiddenInput) {\n        var selectedImageContainer = document.getElementById(currentImageContainer);\n        var mediaUrlInput = document.getElementById(currentHiddenInput);\n\n        if (selectedImageContainer) {\n          mediaUrlInput.value = selectedMediaUrl;\n\n          selectedImageContainer.innerHTML = '';\n\n          // Check if there's an element with id iq-video-quality\n\n          if (mediaUrlInput.hasAttribute('data-validation')) {\n            var fileError = document.getElementById('file-error');\n            var trailerFileError = document.getElementById('trailer-file-error');\n            var videofile = document.querySelector('input[name=\"video_file_input\"]');\n            var vfi = document.querySelector('input[name=\"image_input4\"]');\n            var isTrailerField = mediaUrlInput.id === 'file_url_trailer' || mediaUrlInput.name === 'trailer_video';\n\n            // Only allow video selection\n            if (selectedMediaUrl.endsWith('.mp4') || selectedMediaUrl.endsWith('.avi') ||\n                selectedMediaUrl.endsWith('.mov') || selectedMediaUrl.endsWith('.webm')) {\n              if (fileError) {\n                fileError.style.display = 'none';\n              }\n              if (trailerFileError) {\n                trailerFileError.style.display = 'none';\n              }\n              if (videofile) {\n                videofile.removeAttribute('required');\n              }\n              var video = document.createElement('video');\n              video.src = selectedMediaUrl;\n              video.controls = true;\n              video.classList.add('img-fluid', 'mb-2');\n              video.style.maxWidth = '300px';\n              video.style.maxHeight = '300px';\n\n              selectedImageContainer.appendChild(video);\n\n              var crossIcon = document.createElement('span');\n              crossIcon.innerHTML = '&times;';\n              crossIcon.classList.add('remove-media-icon');\n              crossIcon.style.cursor = 'pointer';\n              crossIcon.style.fontSize = '24px';\n              crossIcon.style.position = 'absolute';\n\n              crossIcon.addEventListener('click', function () {\n                selectedImageContainer.innerHTML = '';\n                mediaUrlInput.value = '';\n                if (videofile) {\n                  videofile.value = '';\n                }\n                if (vfi) {\n                  vfi.setAttribute('required', 'required');\n                }\n\n                if (fileError) {\n                  fileError.style.display = 'block';\n                }\n                if (trailerFileError) {\n                  trailerFileError.style.display = 'block';\n                }\n                // Clear any existing error messages\n                var existingErrors = selectedImageContainer.querySelectorAll('.text-danger');\n                existingErrors.forEach(function(err) {\n                  err.remove();\n                });\n              });\n              if (vfi) {\n                vfi.removeAttribute('required');\n              }\n              selectedImageContainer.appendChild(crossIcon);\n            } else {\n              // Clear any existing error messages first\n              var existingErrors = selectedImageContainer.querySelectorAll('.text-danger');\n              existingErrors.forEach(function(err) {\n                err.remove();\n              });\n              \n              // Also clear errors from wrapper div if it's trailer field\n              if (isTrailerField && mediaUrlInput.id === 'file_url3') {\n                var wrapperDiv = document.querySelector('#url_file_input > div:last-child');\n                if (wrapperDiv) {\n                  var wrapperErrors = wrapperDiv.querySelectorAll('.text-danger');\n                  wrapperErrors.forEach(function(err) {\n                    if (err.textContent.includes('Only video files')) {\n                      err.remove();\n                    }\n                  });\n                }\n              }\n\n              // Clear the hidden input value since invalid file type was selected\n              mediaUrlInput.value = '';\n\n              if (videofile) {\n                videofile.setAttribute('required', 'required');\n              }\n              if (fileError) {\n                fileError.style.display = 'none';\n              }\n              if (trailerFileError) {\n                trailerFileError.style.display = 'none';\n              }\n\n              // Only show error if a file was actually selected (not empty)\n              if (selectedMediaUrl && selectedMediaUrl.trim() !== '') {\n                // Show error for incorrect media type - make it more visible\n                var errorElement = document.createElement('div');\n                errorElement.classList.add('text-danger', 'mt-1');\n                errorElement.style.fontSize = '14px';\n                errorElement.style.fontWeight = '500';\n                errorElement.style.display = 'block';\n                errorElement.textContent = 'Only video files are allowed.';\n                \n                // For trailer video field, append error below input group instead of preview container\n                if (isTrailerField && mediaUrlInput.id === 'file_url3') {\n                  // Find the input group and append error after it\n                  var inputGroup = document.querySelector('#url_file_input .input-group');\n                  var wrapperDiv = document.querySelector('#url_file_input > div:last-child');\n                  if (inputGroup && wrapperDiv) {\n                    // Remove any existing error messages in wrapper\n                    var existingErrors = wrapperDiv.querySelectorAll('.text-danger');\n                    existingErrors.forEach(function(err) {\n                      if (err.textContent.includes('Only video files')) {\n                        err.remove();\n                      }\n                    });\n                    // Append error after input group within wrapper\n                    wrapperDiv.insertBefore(errorElement, inputGroup.nextSibling);\n                  } else {\n                    // Fallback to original location\n                    selectedImageContainer.appendChild(errorElement);\n                  }\n                } else {\n                  // For other fields, use original behavior\n                  selectedImageContainer.appendChild(errorElement);\n                }\n              }\n            }\n          } else {\n\n            if (selectedMediaUrl.endsWith('.png') || selectedMediaUrl.endsWith('.jpg') || selectedMediaUrl.endsWith('.jpeg') || selectedMediaUrl.endsWith('.webp')) {\n              // For other cases, default behavior (assuming image upload or other media)\n              var img = document.createElement('img');\n              img.src = selectedMediaUrl;\n              img.classList.add('img-fluid', 'mb-2');\n              img.style.maxWidth = '100px';\n              img.style.maxHeight = '100px';\n\n              selectedImageContainer.appendChild(img);\n\n              var crossIcon = document.createElement('span');\n              crossIcon.innerHTML = '&times;';\n              crossIcon.classList.add('remove-media-icon');\n              crossIcon.style.cursor = 'pointer';\n              crossIcon.style.fontSize = '24px';\n              crossIcon.addEventListener('click', function () {\n                selectedImageContainer.innerHTML = '';\n                mediaUrlInput.value = '';\n              });\n\n              selectedImageContainer.appendChild(crossIcon);\n            } else {\n              var errorElement = document.createElement('div');\n              errorElement.classList.add('text-danger');\n              errorElement.textContent = 'Only image files are allowed.';\n              selectedImageContainer.appendChild(errorElement);\n\n              var buttonElements = document.querySelectorAll('.input-group-text.form-control');\n              buttonElements.forEach(function (buttonElement) {\n                if (buttonElement) {\n                  buttonElement.innerHTML = '';\n                }\n              });\n            }\n          }\n\n          $('#exampleModal').modal('hide');\n        }\n      }\n    });\n  }\n\n  const submitButton = document.getElementById('submitButton');\n  if (submitButton) {\n    // default disabled until uploads completed\n    submitButton.disabled = true;\n    submitButton.addEventListener('click', function (event) {\n      const mediaContainerdata = document.getElementById('media-container');\n\n      event.preventDefault(); // Prevent the default form submission\n\n      // Check if chunk uploads are still in progress\n      window.uploadedFiles = window.uploadedFiles || [];\n      var activeFiles = window.uploadedFiles.filter(function (f) { return !f.removed; });\n      var allDone = activeFiles.length > 0 && activeFiles.every(function (f) { return f.done === true; });\n      \n      // If files are still uploading, don't proceed\n      if (activeFiles.length > 0 && !allDone) {\n        alert('Please wait for all files to finish uploading before saving.');\n        return false;\n      }\n\n      // Disable button immediately when clicked\n      submitButton.disabled = true;\n      submitButton.innerText = 'Loading...';\n      window.uploadedFiles = window.uploadedFiles || [];\n      var formData = new FormData();\n      var remainingFiles = window.uploadedFiles.filter(file => !file.removed);\n\n      if (remainingFiles.length > 0) {\n        document.getElementById('file_url_media').removeAttribute('required');\n        document.getElementById('file_url_media-error').style.display = 'none';\n        for (var i = 0; i < remainingFiles.length; i++) {\n          formData.append('file_url[]', remainingFiles[i].file);\n        }\n\n        // Add type value to FormData\n        var typeInput = document.getElementById('page_type');\n        if (typeInput) {\n          formData.append('page_type', typeInput.value);\n        }\n\n        // Submit the form with remaining files\n        var xhr = new XMLHttpRequest();\n        xhr.open('POST', `${baseUrl}/app/media-library/store`, true);\n        xhr.setRequestHeader('X-CSRF-TOKEN', document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')); // Set CSRF token header\n        xhr.onloadstart = function () {\n          submitButton.innerText = 'Loading...';\n          submitButton.disabled = true;\n        };\n\n        xhr.onload = function () {\n          if (xhr.status === 200) {\n            window.uploadedFiles = [];\n            // Trigger the media library tab to refresh\n            var libTab = document.getElementById('nav-media-library-tab');\n            if (libTab && typeof libTab.click === 'function') {\n              libTab.click();\n            }\n\n            submitButton.disabled = false;\n            submitButton.innerText = 'Save';\n\n            // Check if FileManager is available and if we're in a folder\n            if (typeof FileManager !== 'undefined' && FileManager && FileManager.state && FileManager.state.currentFolder) {\n              // We're in a folder, reload the folder contents\n              const currentFolder = FileManager.state.currentFolder;\n              const mediaLibraryContent = document.getElementById('mediaLibraryContent');\n              if (mediaLibraryContent) {\n                mediaLibraryContent.innerHTML = ''; // Clear the container\n              }\n              // Reset pagination state\n              FileManager.state.nextOffset = 0;\n              FileManager.state.infiniteInitDone = false;\n              // Reload folder contents with a delay to ensure file is processed\n              // Files may be processed asynchronously, so we wait a bit longer\n              setTimeout(function() {\n                if (typeof FileManager.loadFolderContents === 'function') {\n                  FileManager.loadFolderContents(currentFolder);\n                }\n              }, 1000); // Increased delay to 1 second for async file processing\n            } else {\n              // We're at root level, use the old pagination method\n              const mediaContainer = document.getElementById('media-container');\n              page = 1; // Reset the page to 1\n              if (mediaContainer) {\n                mediaContainer.innerHTML = ''; // Clear the container to load fresh content\n              }\n\n              loadPaginatedImages(); // Call the pagination function\n\n              // Add the scroll event listener after the initial load\n              if (mediaLibraryContent) {\n                mediaLibraryContent.addEventListener('scroll', handleScroll);\n              }\n            }\n\n            var uploadedImagesCont = document.getElementById('uploadedImages');\n            if (uploadedImagesCont) {\n              uploadedImagesCont.innerHTML = '';\n            }\n          }\n        };\n\n        xhr.onerror = function () {\n          submitButton.disabled = false;\n          submitButton.innerText = 'Save';\n          alert('Upload failed. Please try again.');\n        };\n\n        xhr.onloadend = function () {\n          // Only update text if upload failed (success case handled in onload)\n          if (xhr.status !== 200) {\n            submitButton.innerText = 'Save';\n            submitButton.disabled = false;\n          }\n        };\n\n        xhr.send(formData);\n      } else {\n        document.getElementById('file_url_media').setAttribute('required', 'required');\n        document.getElementById('file_url_media-error').style.display = 'block';\n\n        submitButton.innerText = 'Save';\n        submitButton.disabled = false;\n      }\n\n      if (window.location.href === `${baseUrl}/app/media-library`) {\n        window.location.reload();\n      }\n    });\n  }\n\n  function loadPaginatedImages() {\n\n    const mediaContainer = document.getElementById('media-container');\n    const loadingSpinner = document.getElementById('loading-spinner');\n    const mediaLibraryContent = document.getElementById('mediaLibraryContent');\n    const perPage = 21; // Number of images per page (adjust as needed)\n\n    let isLoading = false;\n    let hasMore = true;\n    if (isLoading || !hasMore) return; // Prevent duplicate loads\n\n    isLoading = true; // Set loading to true\n    fetch(`${baseUrl}/app/media-library/getMediaStore?page=${page}&perPage=${perPage}`)\n      .then(response => response.json())\n      .then(data => {\n        if (data.html) {\n          if (page === 1) {\n            mediaContainer.innerHTML = ''; // Clear existing content only on the first page load\n          }\n\n          mediaContainer.insertAdjacentHTML('beforeend', data.html);\n\n          if (data.hasMore) {\n            page++; // Increment page number if more images are available\n          } else {\n            hasMore = false; // Set hasMore to false if no more images\n          }\n        } else {\n          console.log(\"No data received\");\n        }\n      })\n      .catch(error => console.error('Error:', error))\n      .finally(() => {\n        isLoading = false; // Reset loading status after the fetch completes\n      });\n  }\n\n  // Scroll event handler to trigger loading more images\n  function handleScroll() {\n\n    // Check if the user has scrolled to the bottom of the mediaLibraryContent container\n    if (mediaLibraryContent && mediaLibraryContent.scrollTop + mediaLibraryContent.clientHeight >= mediaLibraryContent.scrollHeight - 100) {\n      loadPaginatedImages(); // Load more images when the user scrolls to the bottom\n    }\n  }\n\n  if (exampleModal) {\n    exampleModal.addEventListener('hidden.bs.modal', function () {\n      if (mediaLibraryContent) {\n        mediaLibraryContent.removeEventListener('scroll', handleScroll);\n      }\n    });\n  }\n\n  function handleVideoQualityTypeChange(section) {\n    section.find('.video_quality_type').on('change', function () {\n      var selectedType = $(this).val();\n      var QualityVideoFileInput = section.find('.quality_video_file_input');\n      var QualityVideoURLInput = section.find('.quality_video_input');\n      var qualityVideoInput = section.find('input[name=\"quality_video[]\"]');\n      var qualityVideoURLInput = section.find('input[name=\"quality_video_url_input[]\"]');\n      if (selectedType === 'Local') {\n        QualityVideoFileInput.removeClass('d-none');\n        QualityVideoURLInput.addClass('d-none');\n        qualityVideoInput.val(qualityVideoInput.val()).trigger('change');\n        qualityVideoURLInput.val('').trigger('change');\n      } else {\n        QualityVideoFileInput.addClass('d-none');\n        QualityVideoURLInput.removeClass('d-none');\n        qualityVideoURLInput.val(qualityVideoURLInput.val()).trigger('change');\n        qualityVideoInput.val('').trigger('change');\n      }\n    }).trigger('change');\n  }\n\n  // Download quality type toggle (URL vs Local) for edit/create download quality rows\n  function handleDownloadQualityTypeChange(section) {\n    section.find('.download_quality_video_type').on('change', function () {\n      var selectedType = $(this).val();\n      var fileInputSec = section.find('.download-video-file-input');\n      var urlInputSec = section.find('.download-video-url-input');\n\n      // Hide both, then show needed one\n      fileInputSec.addClass('d-none');\n      urlInputSec.addClass('d-none');\n\n      if (selectedType === 'Local') {\n        fileInputSec.removeClass('d-none');\n      } else if (selectedType === 'URL') {\n        urlInputSec.removeClass('d-none');\n      }\n    }).trigger('change');\n  }\n  function destroySelect2(section) {\n    section.find('select.select2').each(function () {\n      if ($(this).data('select2')) {\n        $(this).select2('destroy');\n      }\n    });\n  }\n\n  function initializeSelect2(section) {\n    section.find('select.select2').each(function () {\n      $(this).select2({\n        width: '100%'\n      });\n    });\n  }\n  function initializeFormState() {\n    // Handle the initial visibility of input fields based on current values\n    $('.video-inputs-container').each(function () {\n      handleVideoQualityTypeChange($(this));\n    });\n    // Initialize clips sections if present\n    $('.clips-inputs-container').each(function () {\n      handleClipUploadTypeChange($(this));\n    });\n    // Initialize existing download quality rows\n    $('.download-video-inputs-container').each(function () {\n      handleDownloadQualityTypeChange($(this));\n    });\n  }\n  $('#add_more_video').click(function () {\n    var originalSection = $('.video-inputs-container').first();\n    destroySelect2(originalSection);\n\n    var newSection = originalSection.clone();\n    videoInputCounter++; // Increment the counter\n\n    newSection.find('input, select').each(function () {\n      var idAttr = $(this).attr('id');\n      if (idAttr) {\n        $(this).attr('id', idAttr + videoInputCounter);\n      }\n\n      var nameAttr = $(this).attr('name');\n      if (nameAttr) {\n        $(this).attr('name', nameAttr + videoInputCounter);\n      }\n\n      $(this).val('').trigger('change');\n    });\n\n    newSection.find('.remove-video-input').removeClass('d-none');\n\n    newSection.find('[data-image-container]').each(function () {\n      var dataAttr = $(this).attr('data-image-container');\n      $(this).attr('data-image-container', dataAttr + videoInputCounter);\n    });\n\n    newSection.find('[data-hidden-input]').each(function () {\n      var dataAttr = $(this).attr('data-hidden-input');\n      $(this).attr('data-hidden-input', dataAttr + videoInputCounter);\n    });\n\n    newSection.find('.img-fluid').remove();\n    newSection.find('.remove-media-icon').remove();\n    newSection.find('input[type=\"hidden\"]').val('');\n\n    newSection.find('div[id]').each(function () {\n      var idAttr = $(this).attr('id');\n      if (idAttr) {\n        $(this).attr('id', idAttr + videoInputCounter);\n      }\n    });\n\n    $('#video-inputs-container-parent').append(newSection);\n\n    initializeSelect2(newSection);\n    handleVideoQualityTypeChange(newSection);\n    initializeModal();\n    initializeSelect2(originalSection);\n  });\n\n  $(document).on('click', '.remove-video-input', function () {\n    $(this).closest('.video-inputs-container').remove();\n  });\n\n  // ===================== DOWNLOAD VIDEO SECTION =====================\n  $('#add_more_download_video').click(function () {\n    var originalSection = $('.download-video-inputs-container').first();\n    destroySelect2(originalSection);\n\n    var newSection = originalSection.clone();\n    videoInputCounter++; // Increment the counter\n\n    newSection.find('input, select').each(function () {\n      var idAttr = $(this).attr('id');\n      if (idAttr) {\n        $(this).attr('id', idAttr + videoInputCounter);\n      }\n\n      var nameAttr = $(this).attr('name');\n      if (nameAttr) {\n        $(this).attr('name', nameAttr + videoInputCounter);\n      }\n\n      $(this).val('').trigger('change');\n    });\n\n    newSection.find('.remove-download-video-input').removeClass('d-none');\n\n    newSection.find('[data-image-container]').each(function () {\n      var dataAttr = $(this).attr('data-image-container');\n      $(this).attr('data-image-container', dataAttr + videoInputCounter);\n    });\n\n    newSection.find('[data-hidden-input]').each(function () {\n      var dataAttr = $(this).attr('data-hidden-input');\n      $(this).attr('data-hidden-input', dataAttr + videoInputCounter);\n    });\n\n    newSection.find('.img-fluid').remove();\n    newSection.find('.remove-media-icon').remove();\n    newSection.find('input[type=\"hidden\"]').val('');\n\n    newSection.find('div[id]').each(function () {\n      var idAttr = $(this).attr('id');\n      if (idAttr) {\n        $(this).attr('id', idAttr + videoInputCounter);\n      }\n    });\n\n    $('#download-video-inputs-container-parent').append(newSection);\n\n    initializeSelect2(newSection);\n    handleDownloadQualityTypeChange(newSection);\n    initializeModal();\n    initializeSelect2(originalSection);\n  });\n\n  $(document).on('click', '.remove-download-video-input', function () {\n    $(this).closest('.download-video-inputs-container').remove();\n  });\n\n  // ===================== CLIPS SECTION =====================\n  let clipInputCounter = 0;\n\n  function handleClipUploadTypeChange(section) {\n    var clipTypeSelect = section.find('.clip_upload_type');\n\n    function setVisibility(selectedType) {\n      var clipVideoFileInput = section.find('.clip_video_file_input');\n      var clipVideoURLInput = section.find('.clip_video_input');\n      var clipVideoEmbedInput = section.find('.clip_video_embed_input');\n\n      clipVideoFileInput.addClass('d-none');\n      clipVideoURLInput.addClass('d-none');\n      clipVideoEmbedInput.addClass('d-none');\n\n      if (selectedType === 'Local') {\n        clipVideoFileInput.removeClass('d-none');\n      } else if (selectedType === 'Embedded' || selectedType === 'Embed') {\n        clipVideoEmbedInput.removeClass('d-none');\n      } else if (selectedType === 'URL' || selectedType === 'YouTube' || selectedType === 'HLS' || selectedType === 'Vimeo' || selectedType === 'x265') {\n        clipVideoURLInput.removeClass('d-none');\n      }\n    }\n\n    // Initial visibility without clearing any existing values\n    setVisibility(clipTypeSelect.val());\n\n    // On user change, update visibility and clear irrelevant fields\n    clipTypeSelect.off('change.clip').on('change.clip', function (e) {\n      var selectedType = $(this).val();\n      setVisibility(selectedType);\n\n      if (e.originalEvent) {\n        var clipFileHidden = section.find('input[name=\"clip_file_input[]\"]');\n        var clipUrlInput = section.find('input[name=\"clip_url_input[]\"]');\n        var clipEmbedTextarea = section.find('textarea[name=\"clip_embedded[]\"]');\n\n        if (selectedType === 'Local') {\n          if (clipUrlInput.length) clipUrlInput.val('').trigger('change');\n          if (clipEmbedTextarea.length) clipEmbedTextarea.val('').trigger('change');\n        } else if (selectedType === 'Embedded' || selectedType === 'Embed') {\n          if (clipUrlInput.length) clipUrlInput.val('').trigger('change');\n          if (clipFileHidden.length) clipFileHidden.val('').trigger('change');\n        } else {\n          if (clipFileHidden.length) clipFileHidden.val('').trigger('change');\n          if (clipEmbedTextarea.length) clipEmbedTextarea.val('').trigger('change');\n        }\n      }\n    });\n  }\n\n  // Function to update visibility of first clip's delete button\n  function updateFirstClipDeleteButton() {\n    var clipBlocks = $('.clip-block');\n    var firstClipBlock = clipBlocks.first();\n    var firstClipDeleteButton = firstClipBlock.find('.remove-clip-input');\n    \n    // Show delete button on first clip if there are more than 2 clips\n    if (clipBlocks.length > 2) {\n      firstClipDeleteButton.removeClass('d-none');\n    } else {\n      firstClipDeleteButton.addClass('d-none');\n    }\n  }\n\n  // Remove any existing handlers to prevent duplicate attachments\n  $('#add_more_clip').off('click').on('click', function () {\n    var originalBlock = $('.clip-block').first();\n    if (originalBlock.length === 0) return;\n\n    destroySelect2(originalBlock);\n    var newBlock = originalBlock.clone();\n    clipInputCounter++;\n\n    newBlock.find('input, select, textarea').each(function () {\n      var idAttr = $(this).attr('id');\n      if (idAttr) {\n        $(this).attr('id', idAttr + '_clip' + clipInputCounter);\n      }\n      var nameAttr = $(this).attr('name');\n      if (nameAttr) {\n        $(this).val('');\n      }\n    });\n\n    newBlock.find('.remove-clip-input').removeClass('d-none');\n\n    newBlock.find('[data-image-container]').each(function () {\n      var dataAttr = $(this).attr('data-image-container');\n      $(this).attr('data-image-container', dataAttr + '_clip' + clipInputCounter);\n    });\n\n    newBlock.find('[data-hidden-input]').each(function () {\n      var dataAttr = $(this).attr('data-hidden-input');\n      $(this).attr('data-hidden-input', dataAttr + '_clip' + clipInputCounter);\n    });\n\n    newBlock.find('.img-fluid').remove();\n    newBlock.find('.remove-media-icon').remove();\n    newBlock.find('input[type=\"hidden\"]').val('');\n\n    newBlock.find('div[id]').each(function () {\n      var idAttr = $(this).attr('id');\n      if (idAttr) {\n        $(this).attr('id', idAttr + '_clip' + clipInputCounter);\n      }\n    });\n\n    $('#add_more_clip').closest('.text-end').before(newBlock);\n\n    initializeSelect2(newBlock);\n    handleClipUploadTypeChange(newBlock.find('.clips-inputs-container'));\n    initializeModal();\n    initializeSelect2(originalBlock);\n    \n    // Update first clip delete button visibility\n    updateFirstClipDeleteButton();\n  });\n\n  $(document).on('click', '.remove-clip-input', function () {\n    $(this).closest('.clip-block').remove();\n    // Update first clip delete button visibility after removal\n    updateFirstClipDeleteButton();\n  });\n  \n  // Initialize on page load\n  updateFirstClipDeleteButton();\n  initializeFormState();\n  initializeModal();\n  initializeSelect2($(document));\n});\n\n\n\n\nif (document.getElementById('file_url_media')) {\n  document.getElementById('file_url_media').addEventListener('change', function () {\n    var fileInput = document.getElementById('file_url_media');\n    var uploadedImagesContainer = document.getElementById('uploadedImages');\n    var chunkSize = 1024 * 1024 * 30; // 100 MB chunk size (adjust as necessary)\n    var uploadedFiles = [];\n\n    // Clear previously uploaded images and reset progress\n    uploadedImagesContainer.innerHTML = '';\n\n    if (fileInput.files.length > 0) {\n      for (var i = 0; i < fileInput.files.length; i++) {\n        var file = fileInput.files[i];\n        var start = 0;\n        var end = Math.min(chunkSize, file.size);\n        var index = 0;\n\n        if (file.type.startsWith('video/')) {\n          var video = document.createElement('video');\n          video.src = URL.createObjectURL(file);\n          video.currentTime = 1; // Capture frame at 1 second\n\n          video.addEventListener('loadeddata', function () {\n            var canvas = document.createElement('canvas');\n            canvas.width = video.videoWidth;\n            canvas.height = video.videoHeight;\n            var ctx = canvas.getContext('2d');\n            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n            var img = document.createElement('img');\n            img.src = canvas.toDataURL('image/jpeg');\n            img.classList.add('img-fluid', 'iq-uploaded-image');\n            img.style.width = '150px'; // Adjust size as needed\n            img.style.height = '100px';\n\n            // Create progress bar\n            var progressBar = document.createElement('div');\n            progressBar.classList.add('progress', 'mb-3', 'iq-progress');\n            progressBar.style.visibility = 'hidden'; // Change visibility to hidden initially\n            progressBar.innerHTML = `\n                            <div class=\"progress-bar\" role=\"progressbar\" style=\"width: 0%;\" aria-valuenow=\"0\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                        `;\n\n            // Create close icon\n            var closeButton = document.createElement('div');\n            closeButton.classList.add('iq-uploaded-image-close');\n            closeButton.innerHTML = '&times;';\n            closeButton.addEventListener('click', function () {\n              uploadedFiles[index].removed = true; // Mark file as removed\n              this.parentNode.remove(); // Remove image on close icon click\n              checkAndClearFileInput();\n            });\n\n            // Append image, progress bar, and close icon\n            var imageContainer = document.createElement('div');\n            imageContainer.classList.add('iq-uploaded-image-container');\n            imageContainer.appendChild(img);\n            imageContainer.appendChild(progressBar);\n            imageContainer.appendChild(closeButton);\n            uploadedImagesContainer.appendChild(imageContainer);\n\n            // Track the uploaded file\n            var itemIndex = uploadedFiles.length;\n            uploadedFiles.push({ file: file, removed: false, progressBar: progressBar.querySelector('.progress-bar'), done: false });\n            updateUploadSubmitState();\n\n            // Start upload and make progress bar visible immediately\n            progressBar.style.visibility = 'visible';\n            uploadChunk(file, itemIndex, start, end, chunkSize, uploadedFiles, progressBar); // Pass progressBar to uploadChunk\n          });\n        } else {\n          var reader = new FileReader();\n          reader.onload = (function (file, index) {\n            return function (e) {\n              var img = document.createElement('img');\n              img.src = e.target.result;\n              img.classList.add('img-fluid', 'iq-uploaded-image');\n              img.style.width = '150px'; // Adjust size as needed\n              img.style.height = '100px';\n\n              // Create progress bar\n              var progressBar = document.createElement('div');\n              progressBar.classList.add('progress', 'my-3', 'iq-progress');\n              progressBar.style.visibility = 'hidden'; // Change visibility to hidden initially\n              progressBar.innerHTML = `\n                                <div class=\"progress-bar\" role=\"progressbar\" style=\"width: 0%;\" aria-valuenow=\"0\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                            `;\n\n              // Create close icon\n              var closeButton = document.createElement('div');\n              closeButton.classList.add('iq-uploaded-image-close');\n              closeButton.innerHTML = '&times;';\n              closeButton.addEventListener('click', function () {\n                uploadedFiles[index].removed = true; // Mark file as removed\n                this.parentNode.remove(); // Remove image on close icon click\n                checkAndClearFileInput();\n              });\n\n              // Append image, progress bar, and close icon\n              var imageContainer = document.createElement('div');\n              imageContainer.classList.add('iq-uploaded-image-container');\n              imageContainer.appendChild(img);\n              imageContainer.appendChild(progressBar);\n              imageContainer.appendChild(closeButton);\n              uploadedImagesContainer.appendChild(imageContainer);\n\n              // Track the uploaded file\n              var itemIndex = uploadedFiles.length;\n              uploadedFiles.push({ file: file, removed: false, progressBar: progressBar.querySelector('.progress-bar'), done: false });\n              updateUploadSubmitState();\n\n              // Start upload and make progress bar visible immediately\n              progressBar.style.visibility = 'visible';\n              uploadChunk(file, itemIndex, start, end, chunkSize, uploadedFiles, progressBar); // Pass progressBar to uploadChunk\n            };\n          })(file, i);\n\n          reader.readAsDataURL(file);\n        }\n      }\n    }\n\n    // Track the uploaded files globally\n    window.uploadedFiles = uploadedFiles;\n    function checkAndClearFileInput() {\n      // If all files are removed\n      if (uploadedFiles.every(file => file.removed)) {\n        fileInput.value = null; // Clear the file input\n        uploadedFiles.length = 0; // Clear the uploadedFiles array\n        document.getElementById('file_url_media').setAttribute('required', 'required');\n        document.getElementById('file_url_media-error').style.display = 'block';\n      }\n      updateUploadSubmitState();\n    }\n  });\n}\n\nfunction uploadChunk(file, index, start, end, chunkSize, uploadedFiles, progressBar) { // Added progressBar parameter\n  var chunk = file.slice(start, end);\n  var formData = new FormData();\n  formData.append('file_chunk', chunk);\n  formData.append('index', index);\n  formData.append('total_chunks', Math.ceil(file.size / chunkSize));\n  formData.append('file_name', file.name);\n\n  // AJAX request to upload chunk\n  var xhr = new XMLHttpRequest();\n\n  // Track upload progress\n  xhr.upload.addEventListener('progress', function (e) {\n    if (e.lengthComputable) {\n      // cumulative percent across whole file, not just current chunk\n      var uploadedSoFar = start + e.loaded;\n      var percentComplete = Math.min(100, (uploadedSoFar / file.size) * 100);\n      uploadedFiles[index].progressBar.style.width = percentComplete + '%';\n      progressBar.style.visibility = 'visible'; // Ensure visible for all chunks\n    }\n  });\n\n  xhr.open('POST', `${baseUrl}/app/media-library/upload`, true);\n  xhr.setRequestHeader('X-CSRF-TOKEN', document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')); // Set CSRF token header\n\n  xhr.onload = function () {\n    if (xhr.status === 200) {\n      var response = JSON.parse(xhr.responseText);\n      if (response.success) {\n        if (end < file.size) {\n          start = end;\n          end = Math.min(start + chunkSize, file.size);\n          uploadChunk(file, index, start, end, chunkSize, uploadedFiles, progressBar); // Pass progressBar to uploadChunk\n        } else {\n          uploadedFiles[index].progressBar.style.width = '100%';\n          progressBar.style.visibility = 'hidden'; // Hide progress bar after completion\n          // mark file as done and update submit state\n          var found = uploadedFiles.find(function (f) { return f.file === file; });\n          if (found) { found.done = true; }\n          updateUploadSubmitState();\n        }\n      }\n    }\n  };\n\n  xhr.send(formData);\n}\n\n/////////////////////////////////////////  set image /////////////////////////////////////////\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  // const mediaContainer = document.getElementById('media-container');\n  const loadingSpinner = document.getElementById('loading-spinner');\n  const mediaLibraryContent = document.getElementById('mediaLibraryContent');\n  const searchInput = document.getElementById('media-search');\n  const noData = document.getElementById('no_data');\n  let page = 1;\n  let isLoading = false;\n  let hasMore = true;\n  let searchQuery = ''; // Variable to store the search query\n  let issearch = 0; // Variable to hold the debounce timeout ID\n  const baseUrl = document.querySelector('meta[name=\"base-url\"]').getAttribute('content'); // Adjust if necessary\n  let noAvailableMessageShown = false; // Flag to prevent multiple \"No Available\" messages\n\n  function loadImages(query = '') {\n\n\n    if (isLoading || (!hasMore && query == '' && issearch == 0)) return;\n\n    isLoading = true;\n    loadingSpinner.style.display = 'block';\n\n    fetch(`${baseUrl}/app/media-library/getMediaStore?page=${page}&query=${encodeURIComponent(query)}`)\n      .then(response => {\n\n        if (!response.ok) {\n          throw new Error('Network response was not ok');\n        }\n        return response.json();\n      })\n      .then(data => {\n\n        // clearNoAvailableMessage();\n\n        if (data.html) {\n\n          noData.classList.add('d-none');\n          if (issearch == 1) {\n            mediaContainer.innerHTML = '';\n          }\n\n          mediaContainer.insertAdjacentHTML('beforeend', data.html);\n          page++;\n          noAvailableMessageShown = false; // Reset flag if new images are loaded\n\n          issearch.value = 0;\n\n\n        } else {\n\n          issearch.value = 0;\n          mediaContainer.innerHTML = '';\n          noData.classList.remove('d-none');\n\n          $('#no_data').text('No data available');\n        }\n\n        hasMore = data.hasMore;\n      })\n      .catch(error => {\n        console.error('Error loading images:', error);\n      })\n      .finally(() => {\n        isLoading = false;\n        loadingSpinner.style.display = 'none';\n      });\n  }\n\n  function onScroll() {\n\n    if (mediaLibraryContent && mediaLibraryContent.scrollTop + mediaLibraryContent.clientHeight >= mediaLibraryContent.scrollHeight - 100) {\n      loadImages(searchQuery);\n    }\n  }\n\n  function handleSearchInput() {\n    searchQuery = searchInput.value;\n\n    page = 1;\n    mediaContainer.innerHTML = '';\n\n    loadImages(searchQuery);\n\n  }\n  if (searchInput) {\n    searchInput.addEventListener('input', function () {\n      issearch.value = 1;\n      handleSearchInput()\n    });\n\n  }\n\n  const clearSearchButton = document.getElementById('clear-search');\n\n  function toggleClearButtonVisibility() {\n    if (searchInput) {\n      if (searchInput.value.length > 0) {\n        clearSearchButton.classList.remove('d-none'); // Show the button\n      } else {\n        clearSearchButton.classList.add('d-none'); // Hide the button\n      }\n    }\n  }\n  if (searchInput) {\n    // Add event listener for input changes\n    searchInput.addEventListener('input', toggleClearButtonVisibility);\n  }\n  // Add event listener for clear button\n  if (clearSearchButton) {\n    clearSearchButton.addEventListener('click', function () {\n      searchInput.value = ''; // Clear the input field\n      toggleClearButtonVisibility(); // Update button visibility\n      page = 1; // Reset page number\n      searchQuery = ''; // Reset search query\n      isLoading = false;\n      hasMore = true;\n      issearch.value = 0;\n      mediaContainer.innerHTML = '';\n      loadImages(searchQuery);\n    });\n  }\n  // Initialize the visibility on page load\n  toggleClearButtonVisibility();\n\n\n  if (exampleModal) {\n\n    exampleModal.addEventListener('shown.bs.modal', function () {\n      if (mediaContainer && mediaContainer.children.length === 0) {\n        loadImages(searchQuery); // Load images based on the search query if present\n      }\n      if (mediaLibraryContent) {\n        mediaLibraryContent.addEventListener('scroll', onScroll);\n      }\n    });\n\n    exampleModal.addEventListener('hidden.bs.modal', function () {\n      if (mediaLibraryContent) {\n        mediaLibraryContent.removeEventListener('scroll', onScroll);\n      }\n    });\n\n    if (mediaContainer && mediaContainer.children.length === 0) {\n      loadImages(searchQuery);\n    }\n\n  }\n\n});\n\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const uploadButton = document.getElementById('nav-upload-files-tab');\n  const libraryButton = document.getElementById('nav-media-library-tab');\n  const searchContainer = document.getElementById('media-search-container');\n\n  // Only proceed if at least one of the tab buttons exists on the page\n  if (libraryButton || uploadButton) {\n\n    // Function to toggle the search container visibility\n    function toggleSearchVisibility() {\n      const isLibraryActive = libraryButton && libraryButton.classList.contains('active');\n\n      if (isLibraryActive) {\n        if (searchContainer) {\n          searchContainer.style.display = 'block';\n        }\n      } else {\n        if (searchContainer) {\n          searchContainer.style.display = 'none';\n        }\n      }\n    }\n\n    // Initial toggle based on the active tab (run only if libraryButton exists)\n    if (libraryButton) {\n      toggleSearchVisibility();\n    }\n\n    // Add event listeners to toggle the visibility on tab change (guarded)\n    if (uploadButton) uploadButton.addEventListener('click', toggleSearchVisibility);\n    if (libraryButton) libraryButton.addEventListener('click', toggleSearchVisibility);\n  }\n});\n\n\nfunction showValidationModal(errors, fieldLabels = {}) {\n  const existingModal = document.getElementById('validationModal')\n  if (existingModal) existingModal.remove()\n\n  // Use a Set to track unique error messages and avoid duplicates\n  // Use message content as key to catch duplicates even if field names/labels differ\n  const seenMessages = new Set()\n  const errorList = Object.entries(errors)\n    .map(([field, messages]) => {\n      // Only process the first error message for each field\n      if (!messages || messages.length === 0) {\n        return ''\n      }\n      \n      const pretty = field.replace(/_/g, ' ').replace(/\\b\\w/g, function (l) { return l.toUpperCase() })\n      let label = fieldLabels[field] || pretty\n      \n      // Check field name first (more reliable than label) for grouping\n      const fieldLower = field.toLowerCase()\n      if (fieldLower.includes('subtitle')) {\n        label = fieldLabels['subtitles'] || label\n      } else if (fieldLower.includes('clip')) {\n        label = fieldLabels['clips'] || label\n      } else if (fieldLower.includes('download')) {\n        label = fieldLabels['download_info'] || label\n      } else if (label.toLowerCase().includes('subtitle')) {\n        label = fieldLabels['subtitles'] || label\n      } else if (label.toLowerCase().includes('clip')) {\n        label = fieldLabels['clips'] || label\n      } else if (label.toLowerCase().includes('download')) {\n        label = fieldLabels['download_info'] || label\n      }\n\n      // Get the first error message only\n      const message = messages[0] ? messages[0].trim() : ''\n      \n      if (!message) {\n        return ''\n      }\n      \n      // Use message content as unique key to prevent duplicates\n      // This catches cases where same message comes from different field names\n      const messageKey = message\n      \n      // Skip if we've already seen this exact error message\n      if (seenMessages.has(messageKey)) {\n        return ''\n      }\n      \n      seenMessages.add(messageKey)\n      return `<li><strong>${label}:</strong> ${message}</li>`\n    })\n    .filter(item => item !== '') // Remove empty strings from duplicates\n    .join('')\n\n  // Get translations from window object or use fallbacks\n  const translations = window.validationTranslations || {\n    validation_errors: 'Validation Errors',\n    please_correct_errors: 'Please correct the following errors:',\n    close: 'Close'\n  };\n\n  const modalHtml = `\n    <div class=\"modal fade\" id=\"validationModal\" tabindex=\"-1\">\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header bg-danger text-white\">\n            <h5 class=\"modal-title\">${translations.validation_errors}</h5>\n            <button type=\"button\" class=\"btn-close btn-close-white bg-white text-primary\" data-bs-dismiss=\"modal\"></button>\n          </div>\n          <div class=\"modal-body\">\n            <p>${translations.please_correct_errors}</p>\n            <ul>${errorList}</ul>\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">${translations.close}</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  `\n\n  document.body.insertAdjacentHTML('beforeend', modalHtml)\n  const modal = new bootstrap.Modal(document.getElementById('validationModal'))\n  modal.show()\n}\n\n// Global error count on tabs (dynamic tab/field mapping)\nfunction showErrorCountOnTabs(errors, tabFields = {}) {\n  document.querySelectorAll('.error-badge').forEach(function (badge) { badge.remove() })\n\n  Object.keys(tabFields).forEach(function (tabId) {\n    const fields = tabFields[tabId] || []\n    let errorCount = 0\n\n    // Check for exact field matches\n    errorCount += fields.filter(function (field) {\n      return field !== '*' && !!errors[field]\n    }).length\n\n    // Check for wildcard patterns (like subtitles.*)\n    const wildcardFields = fields.filter(function (field) {\n      return field.includes('*')\n    })\n\n    wildcardFields.forEach(function (wildcardField) {\n      const pattern = wildcardField.replace('*', '.*')\n      const regex = new RegExp('^' + pattern + '$')\n\n      Object.keys(errors).forEach(function (errorField) {\n        if (regex.test(errorField)) {\n          errorCount++\n        }\n      })\n    })\n\n    if (errorCount > 0) {\n      const tabButton = document.querySelector('[data-bs-target=\"#' + tabId + '\"]')\n      if (tabButton) {\n        const badge = document.createElement('span')\n        badge.className = 'badge bg-danger error-badge ms-2'\n        badge.textContent = errorCount\n        tabButton.appendChild(badge)\n      }\n    }\n  })\n}\n\nwindow.showValidationModal = showValidationModal\nwindow.showErrorCountOnTabs = showErrorCountOnTabs\n\n\n\n\n"],"names":["baseUrl","baseUrlMeta","document","querySelector","getAttribute","exampleModal","getElementById","mediaContainer","mediaLibraryContent","uploadChunk","file","index","start","end","chunkSize","uploadedFiles","progressBar","chunk","slice","formData","FormData","append","Math","ceil","size","name","xhr","XMLHttpRequest","upload","addEventListener","e","lengthComputable","uploadedSoFar","loaded","percentComplete","min","style","width","visibility","open","concat","setRequestHeader","onload","status","JSON","parse","responseText","success","found","find","f","done","updateUploadSubmitState","send","selectedMediaUrl","currentImageContainer","currentHiddenInput","videoInputCounter","initializeImageSelection","button","this","initializeModal","querySelectorAll","forEach","selectMedia","mediaUrl","mediaElement","media","classList","remove","add","window","mediaSelection","setCurrentImageContainer","container","setCurrentHiddenInput","input","getCurrentImageContainer","getCurrentHiddenInput","submitBtn","active","filter","removed","allDone","length","every","disabled","mediaLibraryContentElement","event","target","tagName","src","preventDefault","mediaSubmitButton","selectedImageContainer","mediaUrlInput","value","innerHTML","hasAttribute","fileError","trailerFileError","videofile","vfi","isTrailerField","id","endsWith","display","removeAttribute","video","createElement","controls","maxWidth","maxHeight","appendChild","crossIcon","cursor","fontSize","position","setAttribute","err","wrapperDiv","textContent","includes","trim","errorElement","fontWeight","inputGroup","insertBefore","nextSibling","img","buttonElement","$","modal","submitButton","loadPaginatedImages","isLoading","hasMore","fetch","page","then","response","json","data","html","insertAdjacentHTML","console","log","error","handleScroll","scrollTop","clientHeight","scrollHeight","handleVideoQualityTypeChange","section","on","selectedType","val","QualityVideoFileInput","QualityVideoURLInput","qualityVideoInput","qualityVideoURLInput","removeClass","addClass","trigger","handleDownloadQualityTypeChange","fileInputSec","urlInputSec","destroySelect2","each","select2","initializeSelect2","activeFiles","alert","innerText","remainingFiles","i","typeInput","onloadstart","libTab","click","FileManager","state","currentFolder","nextOffset","infiniteInitDone","setTimeout","loadFolderContents","uploadedImagesCont","onerror","onloadend","location","href","reload","removeEventListener","originalSection","first","newSection","clone","idAttr","attr","nameAttr","dataAttr","closest","clipInputCounter","handleClipUploadTypeChange","clipTypeSelect","setVisibility","clipVideoFileInput","clipVideoURLInput","clipVideoEmbedInput","off","originalEvent","clipFileHidden","clipUrlInput","clipEmbedTextarea","updateFirstClipDeleteButton","clipBlocks","firstClipDeleteButton","originalBlock","newBlock","before","fileInput","uploadedImagesContainer","files","type","startsWith","URL","createObjectURL","currentTime","canvas","videoWidth","height","videoHeight","getContext","drawImage","toDataURL","closeButton","parentNode","checkAndClearFileInput","imageContainer","itemIndex","push","reader","FileReader","result","readAsDataURL","loadingSpinner","searchInput","noData","searchQuery","loadImages","query","arguments","undefined","encodeURIComponent","ok","Error","text","onScroll","clearSearchButton","toggleClearButtonVisibility","children","uploadButton","libraryButton","searchContainer","toggleSearchVisibility","contains","showValidationModal","errors","fieldLabels","existingModal","seenMessages","Set","errorList","Object","entries","map","_ref","_ref2","_slicedToArray","field","messages","pretty","replace","l","toUpperCase","label","fieldLower","toLowerCase","message","messageKey","has","item","join","translations","validationTranslations","validation_errors","please_correct_errors","close","modalHtml","body","bootstrap","Modal","show","showErrorCountOnTabs","tabFields","badge","keys","tabId","fields","errorCount","wildcardField","pattern","regex","RegExp","errorField","test","tabButton","className"],"sourceRoot":""}